{"remainingRequest":"D:\\HBuilderProjects\\vuecli2\\node_modules\\babel-loader\\lib\\index.js!D:\\HBuilderProjects\\vuecli2\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HBuilderProjects\\vuecli2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\vuecli2\\src\\components\\EditBlog.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderProjects\\vuecli2\\src\\components\\EditBlog.vue","mtime":1660129587685},{"path":"D:\\HBuilderProjects\\vuecli2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657605649950},{"path":"D:\\HBuilderProjects\\vuecli2\\node_modules\\babel-loader\\lib\\index.js","mtime":1657605656602},{"path":"D:\\HBuilderProjects\\vuecli2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657605649950},{"path":"D:\\HBuilderProjects\\vuecli2\\node_modules\\vue-loader\\lib\\index.js","mtime":1657605655389}],"contextDependencies":[],"result":["import _objectSpread from \"D:\\\\HBuilderProjects\\\\vuecli2\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.last-index-of\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nexport default {\n  name: 'EditBlog',\n  data: function data() {\n    return {\n      title: this.btitle,\n      type: this.btype,\n      content: this.bcontent,\n      img: this.bimg,\n      //  修改时间\n      newTime: new Date()\n    };\n  },\n  props: ['bid', 'btitle', 'btype', 'bimg', 'bcontent'],\n  methods: {\n    updateBlogImg: function updateBlogImg(params) {\n      var _this = this;\n\n      var file = params.file;\n      var index = file.name.lastIndexOf(\".\");\n      var extension = file.name.substr(index + 1);\n      var extensionList = [\"png\", \"PNG\", \"jpg\", \"JPG\", \"jpeg\", \"JPEG\"];\n      var isLimit = file.size / 1024 / 1024 < 10;\n\n      if (!isLimit) {\n        alert(\"文件大小超过10M\");\n      } else if (extensionList.indexOf(extension) < 0) {\n        alert(\"文件格式不支持\");\n      } else {\n        var obj = new FormData();\n        obj.append('file', file);\n        obj.append('bid', this.bid);\n        this.$axios({\n          method: 'post',\n          url: 'http://localhost:80881/api/blog/uploadInEdit',\n          data: obj\n        }).then(function (res) {\n          _this.img = res.data.bimage; // sessionStorage.setItem('isEdit',JSON.stringify(res.data))\n        }, function (error) {\n          console.log(error.message);\n        });\n      }\n    },\n    // 图片上传\n    $imgAdd: function $imgAdd(pos, $file) {\n      var _this2 = this;\n\n      var fileData = new FileData();\n      fileData.append('file', $file);\n      this.$axios({\n        method: 'post',\n        url: 'http://localhost:8081/api/mavon/AddImg',\n        data: fileData\n      }).then(function (res) {\n        var url = '../../public/MavonImg' + res.data;\n\n        _this2.$refs.md.$img2Url(pos, url);\n      });\n    },\n    // 修改完成\n    editFinish: function editFinish() {\n      var _this3 = this;\n\n      this.$axios.post('http://localhost:8081/api/blog/save', {\n        bid: this.bid,\n        btitle: this.title,\n        btype: this.type,\n        bcontent: this.content\n      }).then(function (res) {\n        // res.data\n        _this3.$router.back();\n      }, function (error) {\n        console.log(error.message);\n      });\n    }\n  },\n  computed: _objectSpread({}, mapState('userOptions', {\n    user: 'user'\n  })),\n  mounted: function mounted() {// let isEdit=sessionStorage.getItem('isEdit')\n    // if(isEdit!='')\n  }\n};",{"version":3,"sources":["EditBlog.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"editing\">\r\n\t\t<div class=\"left\">\r\n\t\t\t<span>请输入标题：</span><br>\r\n\t\t\t<span>类型：</span><br>\r\n\t\t\t<span>请选择封面：</span><br>\r\n\t\t\t<span class=\"bcontent\">内容：</span>\r\n\t\t</div>\r\n\t\t<div style=\"position: absolute; right:30px;top:20px\">\r\n\t\t\t<button class=\"btn\" @click=\"editFinish\">修改完成</button>\r\n\t\t</div>\r\n\t\t<div class=\"right\">\r\n\t\t\t\r\n\t\t\t<input type=\"text\" class=\"titleIn\" v-model=\"title\"><br>\r\n\t\t\t<!-- <select name=\"\" class=\"stype\" v-model=\"type\">\r\n\t\t\t\t<option value=\"\">xxxx</option>\r\n\t\t\t</select><br> -->\r\n\t\t\t<input type=\"text\" v-model=\"type\" class=\"ipt\">\r\n\t\t\t<!-- <input type=\"file\" class=\"checkImg\" accept=\".png, .jpg, .jpeg\"><br> -->\r\n\t\t\t<div class=\"updateBlogImage\">\r\n\t\t\t\t<el-upload\r\n\t\t\t\t\tclass=\"upload-demo\" \r\n\t\t\t\t\tdrag \r\n\t\t\t\t\taction=\"\" \r\n\t\t\t\t\t:http-request=\"updateBlogImg\" \r\n\t\t\t\t\t:limit=\"1\" \r\n\t\t\t\t\tmultiple>\r\n\t\t\t\t\t<img v-if=\"img\" :src=\"require('../assets/blogimage/'+img)\">\r\n\t\t\t\t\t<i v-else class=\"el-icon-upload\"></i>\r\n\t\t\t\t\t<div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n\t\t\t\t\t<div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过10M</div>\r\n\t\t\t\t</el-upload>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"mavonEditor\">\r\n\t\t\t\t<mavon-editor v-model=\"content\" @imdAdd=\"$imgAdd\" ref=\"md\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n    name:'EditBlog',\r\n    data() {\r\n\t\treturn {\r\n\t\t\ttitle:this.btitle,\r\n\t\t\ttype:this.btype,\r\n\t\t\tcontent:this.bcontent,\r\n\t\t\timg:this.bimg,\r\n      //  修改时间\r\n\t\t\tnewTime:new Date()\r\n\t\t}\r\n\t},\r\n\tprops:['bid','btitle','btype','bimg','bcontent'],\r\n\tmethods: {\r\n\t\tupdateBlogImg(params){\r\n\t\t\tlet file=params.file\r\n\t\t\tlet index=file.name.lastIndexOf(\".\")\r\n\t\t\tlet extension=file.name.substr(index+1)\r\n\t\t\tlet extensionList=[\"png\",\"PNG\",\"jpg\",\"JPG\",\"jpeg\",\"JPEG\"]\r\n\t\t\tconst isLimit=file.size / 1024 / 1024 < 10;\r\n\t\t\tif(!isLimit){\r\n\t\t\t\talert(\"文件大小超过10M\")\r\n\t\t\t}else if(extensionList.indexOf(extension)<0){\r\n\t\t\t\talert(\"文件格式不支持\")\r\n\t\t\t}else{\r\n\t\t\t\tlet obj=new FormData()\r\n\t\t\t\tobj.append('file',file)\r\n\t\t\t\tobj.append('bid',this.bid)\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\turl:'http://localhost:80881/api/blog/uploadInEdit',\r\n\t\t\t\t\tdata:obj\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.img=res.data.bimage\r\n\t\t\t\t\t// sessionStorage.setItem('isEdit',JSON.stringify(res.data))\r\n\t\t\t\t},error=>{\r\n\t\t\t\t\tconsole.log(error.message);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n        // 图片上传\r\n        $imgAdd(pos, $file){\r\n            let fileData=new FileData()\r\n            fileData.append('file',$file)\r\n            this.$axios({\r\n                method:'post',\r\n                url:'http://localhost:8081/api/mavon/AddImg',\r\n                data:fileData\r\n            }).then(res=>{\r\n                let url='../../public/MavonImg'+res.data\r\n                this.$refs.md.$img2Url(pos,url)\r\n            })\r\n        },\r\n        // 修改完成\r\n\t\teditFinish(){\r\n\t\t\tthis.$axios.post('http://localhost:8081/api/blog/save',{\r\n\t\t\t\tbid:this.bid,\r\n\t\t\t\tbtitle:this.title,\r\n\t\t\t\tbtype:this.type,\r\n\t\t\t\tbcontent:this.content\r\n\t\t\t}).then(res=>{\r\n\t\t\t\t// res.data\r\n\t\t\t\tthis.$router.back()\r\n\t\t\t},error=>{\r\n\t\t\t\tconsole.log(error.message);\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tcomputed:{\r\n\t\t...mapState('userOptions',{user:'user'})\r\n\t},\r\n\tmounted(){\r\n\t\t// let isEdit=sessionStorage.getItem('isEdit')\r\n\t\t// if(isEdit!='')\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.editing{\r\n\twidth: 1200px;\r\n\theight: 800px;\r\n\tposition: relative;\r\n\tleft: 40px;\r\n\tborder: 1px solid silver;\r\n}\r\n.left{\r\n\tposition: relative;\r\n\twidth: 130px;\r\n\theight: 500px;\r\n\tleft: 20px;\r\n  top: 65px;\r\n\tfont-size: 18px;\r\n\ttext-align: right;\r\n}\r\n.right{\r\n\tposition: relative;\r\n\twidth: 950px;\r\n\theight: 500px;\r\n\ttop: -440px;\r\n\tleft: 160px;\r\n}\r\ninput{\r\n\theight: 30px;\r\n\twidth: 360px;\r\n}\r\nspan{\r\n\tmargin: 10px;\r\n\tline-height: 40px;\r\n}\r\n.titleIn,.ipt{\r\n\tborder-top: 0;\r\n\tborder-left: 0;\r\n\tborder-right: 0;\r\n\tborder-bottom: 1px solid darkgrey;\r\n\t/* border: 0; */\r\n\tmargin-top: 5px;\r\n\toutline: none;\r\n}\r\n.updateBlogImage{\r\n\tmargin-top: 30px;\r\n}\r\n.bcontent{\r\n\tposition: relative;\r\n\ttop: 210px;\r\n}\r\n.mavonEditor{\r\n\tmargin-top: 30px;\r\n}\r\n/* .stype{\r\n\tposition: relative;\r\n\ttop: 21px;\r\n\theight: 30px;\r\n\twidth: 70px;\r\n} */\r\n/* .checkImg{\r\n\tposition: relative;\r\n\ttop: 40px;\r\n} */\r\n/* .ptext{\r\n\tposition: relative;\r\n\ttop: 50px;\r\n} */\r\n.btn{\r\n\tposition: relative;\r\n\t/* top: 60px; */\r\n\t/* left: 700px; */\r\n\twidth: 80px;\r\n\theight: 30px;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}