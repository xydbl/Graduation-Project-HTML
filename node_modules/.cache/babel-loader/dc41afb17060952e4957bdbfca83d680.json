{"remainingRequest":"D:\\HBuilderProjects\\vuecli2\\node_modules\\babel-loader\\lib\\index.js!D:\\HBuilderProjects\\vuecli2\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HBuilderProjects\\vuecli2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\vuecli2\\src\\components\\EditBlog.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderProjects\\vuecli2\\src\\components\\EditBlog.vue","mtime":1660034504751},{"path":"D:\\HBuilderProjects\\vuecli2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657605649950},{"path":"D:\\HBuilderProjects\\vuecli2\\node_modules\\babel-loader\\lib\\index.js","mtime":1657605656602},{"path":"D:\\HBuilderProjects\\vuecli2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657605649950},{"path":"D:\\HBuilderProjects\\vuecli2\\node_modules\\vue-loader\\lib\\index.js","mtime":1657605655389}],"contextDependencies":[],"result":["import _objectSpread from \"D:\\\\HBuilderProjects\\\\vuecli2\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.last-index-of\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nexport default {\n  name: 'EditBlog',\n  data: function data() {\n    return {\n      title: this.btitle,\n      type: this.btype,\n      content: this.bcontent,\n      img: this.bimg,\n      //  修改时间\n      newTime: new Date()\n    };\n  },\n  props: ['bid', 'btitle', 'btype', 'bimg', 'bcontent'],\n  methods: {\n    updateBlogImg: function updateBlogImg(params) {\n      var file = params.file;\n      var index = file.name.lastIndexOf(\".\");\n      var extension = file.name.substr(index + 1);\n      var extensionList = [\"png\", \"PNG\", \"jpg\", \"JPG\", \"jpeg\", \"JPEG\"];\n      var isLimit = file.size / 1024 / 1024 < 10;\n\n      if (!isLimit) {\n        alert(\"文件大小超过10M\");\n      } else if (extensionList.indexOf(extension) < 0) {\n        alert(\"文件格式不支持\");\n      } else {\n        var obj = new FormData();\n        obj.append('file', file);\n        obj.append('bid', this.bid); // this.saveBlog()\n\n        obj.append(\"btitle\", this.title);\n        obj.append(\"buid\", this.user.uid);\n        obj.append(\"btype\", this.type);\n        obj.append(\"bcontent\", this.content);\n        this.$axios({\n          method: 'post',\n          url: 'http://localhost:80881/api/blog/saveBlog',\n          data: obj\n        }).then(function (res) {\n          res.data; // sessionStorage.setItem('isEdit',JSON.stringify(res.data))\n        }, function (error) {\n          console.log(error.message);\n        });\n      }\n    }\n  },\n  computed: _objectSpread({}, mapState('userOptions', {\n    user: 'user'\n  })),\n  mounted: function mounted() {// let isEdit=sessionStorage.getItem('isEdit')\n    // if(isEdit!='')\n  }\n};",{"version":3,"sources":["EditBlog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,SAAA,QAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,KAAA,MADA;AAEA,MAAA,IAAA,EAAA,KAAA,KAFA;AAGA,MAAA,OAAA,EAAA,KAAA,QAHA;AAIA,MAAA,GAAA,EAAA,KAAA,IAJA;AAKA;AACA,MAAA,OAAA,EAAA,IAAA,IAAA;AANA,KAAA;AAQA,GAXA;AAYA,EAAA,KAAA,EAAA,CAAA,KAAA,EAAA,QAAA,EAAA,OAAA,EAAA,MAAA,EAAA,UAAA,CAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,yBACA,MADA,EACA;AACA,UAAA,IAAA,GAAA,MAAA,CAAA,IAAA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,IAAA,CAAA,WAAA,CAAA,GAAA,CAAA;AACA,UAAA,SAAA,GAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACA,UAAA,aAAA,GAAA,CAAA,KAAA,EAAA,KAAA,EAAA,KAAA,EAAA,KAAA,EAAA,MAAA,EAAA,MAAA,CAAA;AACA,UAAA,OAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,EAAA;;AACA,UAAA,CAAA,OAAA,EAAA;AACA,QAAA,KAAA,CAAA,WAAA,CAAA;AACA,OAFA,MAEA,IAAA,aAAA,CAAA,OAAA,CAAA,SAAA,IAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,CAAA;AACA,OAFA,MAEA;AACA,YAAA,GAAA,GAAA,IAAA,QAAA,EAAA;AACA,QAAA,GAAA,CAAA,MAAA,CAAA,MAAA,EAAA,IAAA;AACA,QAAA,GAAA,CAAA,MAAA,CAAA,KAAA,EAAA,KAAA,GAAA,EAHA,CAIA;;AACA,QAAA,GAAA,CAAA,MAAA,CAAA,QAAA,EAAA,KAAA,KAAA;AACA,QAAA,GAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,IAAA,CAAA,GAAA;AACA,QAAA,GAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA,IAAA;AACA,QAAA,GAAA,CAAA,MAAA,CAAA,UAAA,EAAA,KAAA,OAAA;AACA,aAAA,MAAA,CAAA;AACA,UAAA,MAAA,EAAA,MADA;AAEA,UAAA,GAAA,EAAA,0CAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SAAA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,UAAA,GAAA,CAAA,IAAA,CADA,CAEA;AACA,SAPA,EAOA,UAAA,KAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,OAAA;AACA,SATA;AAUA;AACA;AA/BA,GAbA;AA8CA,EAAA,QAAA,oBACA,QAAA,CAAA,aAAA,EAAA;AAAA,IAAA,IAAA,EAAA;AAAA,GAAA,CADA,CA9CA;AAiDA,EAAA,OAjDA,qBAiDA,CACA;AACA;AACA;AApDA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"editing\">\n\t\t<div class=\"left\">\n\t\t\t<span>请输入标题：</span><br>\n\t\t\t<span>类型：</span><br>\n\t\t\t<span>请选择封面：</span><br>\n\t\t\t<span class=\"bcontent\">内容：</span>\n\t\t</div>\n\t\t<div style=\"position: absolute; right:30px;top:20px\">\n\t\t\t<button class=\"btn\">修改完成</button>\n\t\t</div>\n\t\t<div class=\"right\">\n\t\t\t\n\t\t\t<input type=\"text\" class=\"titleIn\" v-model=\"title\"><br>\n\t\t\t<!-- <select name=\"\" class=\"stype\" v-model=\"type\">\n\t\t\t\t<option value=\"\">xxxx</option>\n\t\t\t</select><br> -->\n\t\t\t<input type=\"text\" v-model=\"type\" class=\"ipt\">\n\t\t\t<!-- <input type=\"file\" class=\"checkImg\" accept=\".png, .jpg, .jpeg\"><br> -->\n\t\t\t<div class=\"updateBlogImage\">\n\t\t\t\t<el-upload\n\t\t\t\t\tclass=\"upload-demo\" \n\t\t\t\t\tdrag \n\t\t\t\t\taction=\"\" \n\t\t\t\t\t:http-request=\"updateBlogImg\" \n\t\t\t\t\t:limit=\"1\" \n\t\t\t\t\tmultiple>\n\t\t\t\t\t<img v-if=\"img\" :src=\"require('../assets/blogimage/'+img)\">\n\t\t\t\t\t<i v-else class=\"el-icon-upload\"></i>\n\t\t\t\t\t<div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n\t\t\t\t\t<div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过10M</div>\n\t\t\t\t</el-upload>\n\t\t\t</div>\n\t\t\t<div class=\"mavonEditor\">\n\t\t\t\t<mavon-editor v-model=\"content\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n    name:'EditBlog',\n    data() {\n\t\treturn {\n\t\t\ttitle:this.btitle,\n\t\t\ttype:this.btype,\n\t\t\tcontent:this.bcontent,\n\t\t\timg:this.bimg,\n      //  修改时间\n\t\t\tnewTime:new Date()\n\t\t}\n\t},\n\tprops:['bid','btitle','btype','bimg','bcontent'],\n\tmethods: {\n\t\tupdateBlogImg(params){\n\t\t\tlet file=params.file\n\t\t\tlet index=file.name.lastIndexOf(\".\")\n\t\t\tlet extension=file.name.substr(index+1)\n\t\t\tlet extensionList=[\"png\",\"PNG\",\"jpg\",\"JPG\",\"jpeg\",\"JPEG\"]\n\t\t\tconst isLimit=file.size / 1024 / 1024 < 10;\n\t\t\tif(!isLimit){\n\t\t\t\talert(\"文件大小超过10M\")\n\t\t\t}else if(extensionList.indexOf(extension)<0){\n\t\t\t\talert(\"文件格式不支持\")\n\t\t\t}else{\n\t\t\t\tlet obj=new FormData()\n\t\t\t\tobj.append('file',file)\n\t\t\t\tobj.append('bid',this.bid)\n\t\t\t\t// this.saveBlog()\n\t\t\t\tobj.append(\"btitle\",this.title)\n\t\t\t\tobj.append(\"buid\",this.user.uid)\n\t\t\t\tobj.append(\"btype\",this.type)\n\t\t\t\tobj.append(\"bcontent\",this.content)\n\t\t\t\tthis.$axios({\n\t\t\t\t\tmethod:'post',\n\t\t\t\t\turl:'http://localhost:80881/api/blog/saveBlog',\n\t\t\t\t\tdata:obj\n\t\t\t\t}).then(res=>{\n\t\t\t\t\tres.data\n\t\t\t\t\t// sessionStorage.setItem('isEdit',JSON.stringify(res.data))\n\t\t\t\t},error=>{\n\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t},\n\tcomputed:{\n\t\t...mapState('userOptions',{user:'user'})\n\t},\n\tmounted(){\n\t\t// let isEdit=sessionStorage.getItem('isEdit')\n\t\t// if(isEdit!='')\n\t}\n}\n</script>\n\n<style scoped>\n.editing{\n\twidth: 1200px;\n\theight: 800px;\n\tposition: relative;\n\tleft: 40px;\n\tborder: 1px solid silver;\n}\n.left{\n\tposition: relative;\n\twidth: 130px;\n\theight: 500px;\n\tleft: 20px;\n  top: 65px;\n\tfont-size: 18px;\n\ttext-align: right;\n}\n.right{\n\tposition: relative;\n\twidth: 950px;\n\theight: 500px;\n\ttop: -440px;\n\tleft: 160px;\n}\ninput{\n\theight: 30px;\n\twidth: 360px;\n}\nspan{\n\tmargin: 10px;\n\tline-height: 40px;\n}\n.titleIn,.ipt{\n\tborder-top: 0;\n\tborder-left: 0;\n\tborder-right: 0;\n\tborder-bottom: 1px solid darkgrey;\n\t/* border: 0; */\n\tmargin-top: 5px;\n\toutline: none;\n}\n.updateBlogImage{\n\tmargin-top: 30px;\n}\n.bcontent{\n\tposition: relative;\n\ttop: 210px;\n}\n.mavonEditor{\n\tmargin-top: 30px;\n}\n/* .stype{\n\tposition: relative;\n\ttop: 21px;\n\theight: 30px;\n\twidth: 70px;\n} */\n/* .checkImg{\n\tposition: relative;\n\ttop: 40px;\n} */\n/* .ptext{\n\tposition: relative;\n\ttop: 50px;\n} */\n.btn{\n\tposition: relative;\n\t/* top: 60px; */\n\t/* left: 700px; */\n\twidth: 80px;\n\theight: 30px;\n}\n</style>"],"sourceRoot":"src/components"}]}