{"remainingRequest":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\src\\components\\Editing.vue?vue&type=style&index=0&id=16d89b98&scoped=true&lang=css&","dependencies":[{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\src\\components\\Editing.vue","mtime":1661326797914},{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\css-loader\\index.js","mtime":1660272403304},{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1660272406552},{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\postcss-loader\\src\\index.js","mtime":1660272405361},{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660272402559},{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\vue-loader\\lib\\index.js","mtime":1660272406551}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.editing{\r\n\twidth: 1200px;\r\n\theight: 780px;\r\n\tposition: relative;\r\n\tleft: 200px;\r\n\ttop: 20px;\r\n\tborder: 1px solid silver;\r\n\tborder-bottom: 0;\r\n}\r\n.top{\r\n\tposition: relative;\r\n\ttop: -485px;\r\n\tleft: 1040px;\r\n\twidth: 200px;\r\n}\r\n.top button{\r\n\tmargin: 10px;\r\n}\r\n.left{\r\n\tposition: relative;\r\n\twidth: 130px;\r\n\theight: 500px;\r\n\tleft: 20px;\r\n\tfont-size: 18px;\r\n\ttext-align: right;\r\n}\r\n.right{\r\n\tposition: relative;\r\n\twidth: 1000px;\r\n\theight: 600px;\r\n\ttop: -460px;\r\n\tleft: 160px;\r\n}\r\ninput{\r\n\theight: 30px;\r\n\twidth: 360px;\r\n}\r\nspan{\r\n\tmargin: 10px;\r\n\tline-height: 50px;\r\n}\r\n.titleIn{\r\n\tposition: relative;\r\n\ttop: -15px;\r\n\tmargin-top: 10px;\r\n\tborder-top: 0;\r\n\tborder-left: 0;\r\n\tborder-right: 0;\r\n\tborder-bottom: 1px solid darkgrey;\r\n\toutline: none;\r\n}\r\n.stype{\r\n\tposition: relative;\r\n\ttop: 21px;\r\n\theight: 30px;\r\n\twidth: 70px;\r\n}\r\n/* .checkImg{\r\n\tposition: relative;\r\n\ttop: 55px;\r\n\tleft: -370px;\r\n} */\r\n.uploadBlogImage{\r\n\tposition: relative;\r\n\ttop: 30px;\r\n}\r\n/* .ptext{\r\n\tposition: relative;\r\n\ttop: 50px;\r\n} */\r\n.mavonEditor{\r\n\tposition: relative;\r\n\ttop: 80px;\r\n\theight: 400px;\r\n}\r\n/* .btn{\r\n\tposition: relative;\r\n\ttop: 10px;\r\n\twidth: 60px;\r\n\theight: 30px;\r\n} */\r\n.inputcss{\r\n\tborder-top: 0;\r\n\tborder-left: 0;\r\n\tborder-right: 0;\r\n\tborder-bottom: 1px solid darkgrey;\r\n\toutline: none;\r\n}\r\n",{"version":3,"sources":["Editing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Editing.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div class=\"editing\">\r\n\t\t<div class=\"left\">\r\n\t\t\t<span>请输入标题：</span><br>\r\n\t\t\t<span>类型：</span><br>\r\n\t\t\t<span>请选择封面：</span><br>\r\n\t\t\t<div style=\"position: relative;top: 200px;\">\r\n\t\t\t\t<span>内容：</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"top\">\r\n\t\t\t<button @click=\"save\">保存</button>\r\n\t\t\t<button @click=\"pushBlog\">发布</button>\r\n\t\t</div>\r\n\t\t<div class=\"right\">\r\n\t\t\t<input type=\"text\" class=\"titleIn inputcss\" v-model=\"title\" @input=\"titleIsTrue\"><br>\r\n\t\t\t<input type=\"text\" class=\"inputcss\" v-model=\"type\" >\r\n\t\t\t<!-- <select name=\"\" class=\"stype\" v-model=\"type\">\r\n\t\t\t\t<option value=\"\">xxxx</option>\r\n\t\t\t</select><br> -->\r\n\t\t\t<!-- <input type=\"file\" class=\"checkImg\" accept=\".png, .jpg, .jpeg\"><br> -->\r\n\t\t\t<div class=\"uploadBlogImage\">\r\n\t\t\t\t<el-upload\r\n\t\t\t\t\tclass=\"upload-demo\" \r\n\t\t\t\t\tdrag \r\n\t\t\t\t\taction=\"\" \r\n\t\t\t\t\t:http-request=\"uploadBlogImg\" \r\n\t\t\t\t\t:limit=\"1\" \r\n\t\t\t\t\tmultiple>\r\n\t\t\t\t\t<img v-if=\"img\" :src=\"require('../assets/blogimage/'+img)\" style=\"width:100%;height:100%\">\r\n\t\t\t\t\t<i v-else class=\"el-icon-upload\"></i>\r\n\t\t\t\t\t<div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n\t\t\t\t\t<div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过10M,只能上传一个文件</div>\r\n\t\t\t\t</el-upload>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"mavonEditor\">\r\n\t\t\t\t<mavon-editor v-model=\"content\" @imgAdd=\"imgAdd1\" @click=\"save\" ref=\"edingMd\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n// 发布 博客\r\n// import axios from 'axios'\r\nimport { mapState, mapMutations } from 'vuex'\r\nexport default {\r\n    name:'Editing',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttitle:'',\r\n\t\t\ttype:'',\r\n\t\t\tcontent:'',\r\n\t\t\tnewTime:+new Date(),\r\n\t\t\tfromData:{},\r\n\t\t\timg:''\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations('blogOptions',{updateBid:'UPDATEBID'}),\r\n\t\t// 标题是否可用\r\n\t\ttitleIsTrue(){\r\n\t\t\tthis.$axios.get(`http://localhost:8081/api/blog/findByTitle/${this.title}`)\r\n\t\t\t.then(res=>{\r\n\t\t\t\tif(res.data){\r\n\t\t\t\t\tthis.$message.warning('标题不可用')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror=>{\r\n\t\t\t\tconsole.log(error.message);\r\n\t\t\t})\r\n\t\t},\r\n\t\t// \r\n\t\tsave(){\r\n\t\t\tthis.$axios.post(\"http://localhost:8081/api/blog/save\",{\r\n\t\t\t\tbid:this.bid,\r\n\t\t\t\tbuid:this.user.uid,\r\n\t\t\t\tbtitle:this.title,\r\n\t\t\t\tbtype:this.type,\r\n\t\t\t\tbcontent:this.content,\r\n\t\t\t\tbtime:+new Date(),\r\n\t\t\t\tbstate:0\r\n\t\t\t}).then(res=>{\r\n\t\t\t\tif(res.data){\r\n\t\t\t\t\t// alert(\"保存成功\")\r\n\t\t\t\t\tthis.$message.success('保存成功')\r\n\t\t\t\t\tsessionStorage.setItem(\"editing\",JSON.stringify(res.data))\r\n\t\t\t\t\tthis.updateBid=res.data.bid\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror=>{\r\n\t\t\t\talert(\"保存失败\")\r\n\t\t\t\tconsole.log(error.message);\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 保存saveBlog 所有 只在设置封面时调用 已放弃此方法\r\n\t\t// saveBlog(){\r\n\t\t// \tthis.$bus.obj.append(\"btitle\",this.title)\r\n\t\t// \tthis.$bus.obj.append(\"buid\",this.user.uid)\r\n\t\t// \tthis.$bus.obj.append(\"btype\",this.type)\r\n\t\t// \tthis.$bus.obj.append(\"bcontent\",this.content)\r\n\t\t// \tthis.$bus.obj.append(\"btime\",new Date())\r\n\t\t// \tthis.$bus.obj.append(\"bstate\",0)\r\n\t\t// \tthis.$nextTick(function(){\r\n\t\t// \t\tthis.$axios({\r\n\t\t// \t\t\tmethod:'post',\r\n\t\t// \t\t\turl:'http://localhost:8081/api/blog/saveBlog',\r\n\t\t// \t\t\theaders:{\"Content-Type\":\"multipart/form-data\"},\r\n\t\t// \t\t\tdata:this.$bus.obj\r\n\t\t// \t\t}).then(res=>{\r\n\t\t// \t\t\t// this.$refs.clear1.clearFiles()\r\n\t\t// \t\t\t// console.log(res.data);\r\n\t\t// \t\t\tthis.updateBid(res.data.bid)\r\n\t\t// \t\t\tthis.img=res.data.bimage\r\n\t\t// \t\t},\r\n\t\t// \t\terror=>{\r\n\t\t// \t\t\tconsole.log(error.message);\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// },\r\n\t\t// 发布\r\n\t\tpushBlog() {\r\n\t\t\tconsole.log(this.bid,this.user.uid);\r\n\t\t\tthis.$axios.post('http://localhost:8081/api/blog/save',{\r\n\t\t\t\tbid:this.bid,\r\n\t\t\t\tbuid:this.user.uid,\r\n\t\t\t\tbtitme:this.title,\r\n\t\t\t\tbtype:this.type,\r\n\t\t\t\tbcontent:this.content,\r\n\t\t\t\tbtime:this.newTime,\r\n\t\t\t\tbstate:1,\r\n\t\t\t\tbclick:0\r\n\t\t\t}).then(res=>{\r\n\t\t\t\tif(res.data){\r\n\t\t\t\t\t// alert(\"发布成功\")\r\n\t\t\t\t\tthis.$router.back()\r\n\t\t\t\t\tthis.updateBid('')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror=>{\r\n\t\t\t\talert('发布失败')\r\n\t\t\t\tconsole.log(error.message);\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 上传图片\r\n\t\tuploadBlogImg(params){\r\n\t\t\tlet file=params.file\r\n\t\t\tlet index=file.name.lastIndexOf(\".\")\r\n\t\t\tlet extension=file.name.substr(index+1)\r\n\t\t\tlet extensionList=[\"png\",\"PNG\",\"jpg\",\"JPG\",\"jpeg\",\"JPEG\"]\r\n\t\t\tconst isLimit=file.size / 1024 / 1024 < 10;\r\n\t\t\tif(!isLimit){\r\n\t\t\t\talert(\"文件大小超过10M\")\r\n\t\t\t}else if(extensionList.indexOf(extension)<0){\r\n\t\t\t\talert(\"文件格式不支持\")\r\n\t\t\t}else{\r\n\t\t\t\tlet obj=new FormData()\r\n\t\t\t\tobj.append('file',file)\r\n\t\t\t\tobj.append('bid',this.bid)\r\n\t\t\t\t// this.saveBlog()\r\n\t\t\t\tobj.append(\"btitle\",this.title)\r\n\t\t\t\tobj.append(\"buid\",this.user.uid)\r\n\t\t\t\tobj.append(\"btype\",this.type)\r\n\t\t\t\tobj.append(\"bcontent\",this.content)\r\n\t\t\t\tobj.append(\"btime\",+new Date())\r\n\t\t\t\tobj.append(\"bstate\",0)\r\n\t\t\t\tthis.$nextTick(function(){\r\n\t\t\t\t\tthis.$axios({\r\n\t\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\t\turl:'http://localhost:8081/api/blog/saveBlog',\r\n\t\t\t\t\t\t// headers:{\"Content-Type\":\"multipart/form-data\"},\r\n\t\t\t\t\t\tdata:obj\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\t// this.$refs.clear1.clearFiles()\r\n\t\t\t\t\t\t// console.log(this.$refs.clear1.clearFiles());\r\n\t\t\t\t\t\t// console.log(res.data);\r\n\t\t\t\t\t\t// file.clearFiles()\r\n\t\t\t\t\t\tthis.updateBid(res.data.bid)\r\n\t\t\t\t\t\tthis.img=res.data.bimage\r\n\t\t\t\t\t\tsessionStorage.setItem(\"editing\",JSON.stringify(res.data) )\r\n\t\t\t\t\t\t// localStorage.setItem(\"editing\",res.data)\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror=>{\r\n\t\t\t\t\t\tconsole.log(error.message);\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// mavon-editor 图片上传\r\n\t\timgAdd1(pos,file){\r\n\t\t\tlet formData=new FormData()\r\n\t\t\tformData.append('file',file)\r\n\t\t\tthis.$axios({\r\n\t\t\t\tmethod:'post',\r\n\t\t\t\turl:'http://localhost:8081/api/mavon/addImg',\r\n\t\t\t\tdata:formData\r\n\t\t\t})\r\n\t\t\t.then(res=>{\r\n\t\t\t\tlet url='/MavonImg/'+res.data\r\n\t\t\t\tthis.$refs.edingMd.$img2Url(pos,url)\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tcomputed:{\r\n\t\t...mapState('userOptions',{user:'user'}),\r\n\t\t...mapState('blogOptions',{bid:'bid'}),\r\n\t},\r\n\tmounted() {\r\n\t\tlet editing=sessionStorage.getItem(\"editing\")\r\n\t\t// console.log(editing!=''&&editing!=null);\r\n\t\tif(editing!=''&&editing!=null){\r\n\t\t\tlet editblog=JSON.parse(editing)\r\n\t\t\tthis.updateBid(editblog.bid)\r\n\t\t\tthis.title=editblog.btitle\r\n\t\t\tthis.type=editblog.btype\r\n\t\t\tthis.content=editblog.bcontent\r\n\t\t\tthis.img=editblog.bimage\r\n\t\t}\r\n\t},\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.editing{\r\n\twidth: 1200px;\r\n\theight: 780px;\r\n\tposition: relative;\r\n\tleft: 200px;\r\n\ttop: 20px;\r\n\tborder: 1px solid silver;\r\n\tborder-bottom: 0;\r\n}\r\n.top{\r\n\tposition: relative;\r\n\ttop: -485px;\r\n\tleft: 1040px;\r\n\twidth: 200px;\r\n}\r\n.top button{\r\n\tmargin: 10px;\r\n}\r\n.left{\r\n\tposition: relative;\r\n\twidth: 130px;\r\n\theight: 500px;\r\n\tleft: 20px;\r\n\tfont-size: 18px;\r\n\ttext-align: right;\r\n}\r\n.right{\r\n\tposition: relative;\r\n\twidth: 1000px;\r\n\theight: 600px;\r\n\ttop: -460px;\r\n\tleft: 160px;\r\n}\r\ninput{\r\n\theight: 30px;\r\n\twidth: 360px;\r\n}\r\nspan{\r\n\tmargin: 10px;\r\n\tline-height: 50px;\r\n}\r\n.titleIn{\r\n\tposition: relative;\r\n\ttop: -15px;\r\n\tmargin-top: 10px;\r\n\tborder-top: 0;\r\n\tborder-left: 0;\r\n\tborder-right: 0;\r\n\tborder-bottom: 1px solid darkgrey;\r\n\toutline: none;\r\n}\r\n.stype{\r\n\tposition: relative;\r\n\ttop: 21px;\r\n\theight: 30px;\r\n\twidth: 70px;\r\n}\r\n/* .checkImg{\r\n\tposition: relative;\r\n\ttop: 55px;\r\n\tleft: -370px;\r\n} */\r\n.uploadBlogImage{\r\n\tposition: relative;\r\n\ttop: 30px;\r\n}\r\n/* .ptext{\r\n\tposition: relative;\r\n\ttop: 50px;\r\n} */\r\n.mavonEditor{\r\n\tposition: relative;\r\n\ttop: 80px;\r\n\theight: 400px;\r\n}\r\n/* .btn{\r\n\tposition: relative;\r\n\ttop: 10px;\r\n\twidth: 60px;\r\n\theight: 30px;\r\n} */\r\n.inputcss{\r\n\tborder-top: 0;\r\n\tborder-left: 0;\r\n\tborder-right: 0;\r\n\tborder-bottom: 1px solid darkgrey;\r\n\toutline: none;\r\n}\r\n</style>"]}]}