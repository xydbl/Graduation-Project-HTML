{"remainingRequest":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\src\\components\\Approved.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\src\\components\\Approved.vue","mtime":1660648187193},{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660272402559},{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\babel-loader\\lib\\index.js","mtime":1660272402348},{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660272402559},{"path":"D:\\HBuilderProjects\\vue2\\Graduation-Project-HTML\\node_modules\\vue-loader\\lib\\index.js","mtime":1660272406551}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {mapState, mapMutations } from 'vuex'\r\nexport default {\r\n    name:'Approved',\r\n    data() {\r\n      return {\r\n        list:[],\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapMutations('commentaryOptions',{currentCommentary:'CURRENTCOMMENTARY'}),\r\n      // 过滤 commentaryList\r\n      getApproved(){\r\n        this.list=this.commentaryList\r\n        this.list=this.list.filter((li)=>{\r\n          return li.ctype==1\r\n        })\r\n      },\r\n      // 选择\r\n      checked1(li){\r\n        let x\r\n        if(!li.checked){\r\n          if(li.checked==null||li.checked==undefined){\r\n            this.$set(li,'checked',true)\r\n          }else{\r\n            li.checked=true\r\n          }\r\n        }else{\r\n          li.checked=false\r\n        }\r\n        // this.list.forEach(li=>{\r\n        //   if(li.checked) \r\n        // })\r\n      },\r\n      // 选中所有 或取消\r\n      checkAllComm(){\r\n        this.list=this.list.forEach(li=>{\r\n          li.checked=this.checkAll\r\n        })\r\n      },\r\n      //  删除评论\r\n      deleteComm(cid,bid){\r\n        this.$axios.get(`http://localhost:8081/api/commentary/del/${cid}`)\r\n        .then(res=>{\r\n          if(res.data){\r\n            alert('删除成功')\r\n            this.currentCommentary(bid)\r\n            this.getApproved()\r\n          }else{\r\n            alert('删除失败')\r\n          }\r\n        },\r\n        error=>{\r\n          console.log(error.message);\r\n        })\r\n      },\r\n      //  删除选中\r\n      delChecked(){\r\n        let ids=[]\r\n        this.list.forEach(li=>{\r\n          if(li.checked){\r\n            ids.push(li.cid)\r\n          }\r\n        })\r\n        if(ids!=''){\r\n          this.$axios.post('http://localhost:8081/api/commentary/delAll',ids)\r\n          .then(res=>{\r\n            if(res.data){\r\n              alert('删除成功')\r\n              this.currentCommentary(sessionStorage.getItem('abid'))\r\n            }\r\n          },\r\n          error=>{\r\n            console.log(error.message);\r\n          })\r\n        }\r\n      },\r\n      test1(){\r\n        this.$axios.post('http://localhost:8081/api/commentary/findByIdPage',{\r\n          bid:1,\r\n          pageIndex:1,\r\n          pageSize:6\r\n        }).then(res=>{\r\n          console.log(res.data);\r\n        },error=>{\r\n          console.log(error.message);\r\n        })\r\n      }\r\n    },\r\n    computed:{\r\n      ...mapState('commentaryOptions',{commentaryList:'commentaryList'})\r\n    },\r\n    mounted() {\r\n      // this.test1()\r\n      let abid=sessionStorage.getItem('abid')\r\n      this.currentCommentary(abid)\r\n      // setInterval(() => {\r\n      //   this.getApproved()\r\n      // }, 200);\r\n      setTimeout(() => {\r\n        this.getApproved()\r\n      }, 200);\r\n    },\r\n}\r\n",{"version":3,"sources":["Approved.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Approved.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n              <td>选择</td>\r\n              <td>评论内容</td>\r\n              <td>评论人</td>\r\n              <td>评论时间</td>\r\n              <td><button @click=\"delChecked\">删除选中</button></td>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr valign=middle bgcolor=#E3E7EB v-for=\"li in list\" :key=\"li.cid\">\r\n              <td><input type=\"checkbox\" :checked=\"li.checked\" @change=\"checked1(li)\"></td>\r\n              <td>{{li.message}}</td>\r\n              <td>{{li.messageId}}</td>\r\n              <td>{{li.ctime}}</td>\r\n              <td><span style=\"color: red;\" @click=\"deleteComm(li.cid,li.clogId)\">删除</span></td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapMutations } from 'vuex'\r\nexport default {\r\n    name:'Approved',\r\n    data() {\r\n      return {\r\n        list:[],\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapMutations('commentaryOptions',{currentCommentary:'CURRENTCOMMENTARY'}),\r\n      // 过滤 commentaryList\r\n      getApproved(){\r\n        this.list=this.commentaryList\r\n        this.list=this.list.filter((li)=>{\r\n          return li.ctype==1\r\n        })\r\n      },\r\n      // 选择\r\n      checked1(li){\r\n        let x\r\n        if(!li.checked){\r\n          if(li.checked==null||li.checked==undefined){\r\n            this.$set(li,'checked',true)\r\n          }else{\r\n            li.checked=true\r\n          }\r\n        }else{\r\n          li.checked=false\r\n        }\r\n        // this.list.forEach(li=>{\r\n        //   if(li.checked) \r\n        // })\r\n      },\r\n      // 选中所有 或取消\r\n      checkAllComm(){\r\n        this.list=this.list.forEach(li=>{\r\n          li.checked=this.checkAll\r\n        })\r\n      },\r\n      //  删除评论\r\n      deleteComm(cid,bid){\r\n        this.$axios.get(`http://localhost:8081/api/commentary/del/${cid}`)\r\n        .then(res=>{\r\n          if(res.data){\r\n            alert('删除成功')\r\n            this.currentCommentary(bid)\r\n            this.getApproved()\r\n          }else{\r\n            alert('删除失败')\r\n          }\r\n        },\r\n        error=>{\r\n          console.log(error.message);\r\n        })\r\n      },\r\n      //  删除选中\r\n      delChecked(){\r\n        let ids=[]\r\n        this.list.forEach(li=>{\r\n          if(li.checked){\r\n            ids.push(li.cid)\r\n          }\r\n        })\r\n        if(ids!=''){\r\n          this.$axios.post('http://localhost:8081/api/commentary/delAll',ids)\r\n          .then(res=>{\r\n            if(res.data){\r\n              alert('删除成功')\r\n              this.currentCommentary(sessionStorage.getItem('abid'))\r\n            }\r\n          },\r\n          error=>{\r\n            console.log(error.message);\r\n          })\r\n        }\r\n      },\r\n      test1(){\r\n        this.$axios.post('http://localhost:8081/api/commentary/findByIdPage',{\r\n          bid:1,\r\n          pageIndex:1,\r\n          pageSize:6\r\n        }).then(res=>{\r\n          console.log(res.data);\r\n        },error=>{\r\n          console.log(error.message);\r\n        })\r\n      }\r\n    },\r\n    computed:{\r\n      ...mapState('commentaryOptions',{commentaryList:'commentaryList'})\r\n    },\r\n    mounted() {\r\n      // this.test1()\r\n      let abid=sessionStorage.getItem('abid')\r\n      this.currentCommentary(abid)\r\n      // setInterval(() => {\r\n      //   this.getApproved()\r\n      // }, 200);\r\n      setTimeout(() => {\r\n        this.getApproved()\r\n      }, 200);\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ntable{\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\nspan{\r\n  cursor: pointer;\r\n  margin: 10px;\r\n}\r\nbutton{\r\n  height: 30px;\r\n}\r\n</style>"]}]}